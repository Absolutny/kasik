<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–¥–±—Ä–æ—Å—å –º–æ–Ω–µ—Ç–∫—É - Casino</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –º–æ–Ω–µ—Ç–∫–∏ */
        @keyframes coinFlip {
            0% {
                transform: rotateY(0deg) scale(1);
            }
            25% {
                transform: rotateY(450deg) scale(1.1);
            }
            50% {
                transform: rotateY(900deg) scale(1);
            }
            75% {
                transform: rotateY(1350deg) scale(1.1);
            }
            100% {
                transform: rotateY(1800deg) scale(1);
            }
        }
        
        @keyframes choicePulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
            }
            50% { 
                transform: scale(1.05);
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
            }
        }
        
        @keyframes resultWin {
            0% {
                transform: translateY(-20px);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .coin {
            width: 150px;
            height: 150px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            margin: 20px auto;
            cursor: pointer;
        }
        
        .coin-side {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            backface-visibility: hidden;
            border: 5px solid #daa520;
        }
        
        .coin-heads {
            background: radial-gradient(circle at 30% 30%, #ffd700, #daa520);
            color: #8b4513;
            z-index: 2;
        }
        
        .coin-tails {
            background: radial-gradient(circle at 30% 30%, #c0c0c0, #808080);
            color: #333;
            transform: rotateY(180deg);
        }
        
        .coin.flipping {
            animation: coinFlip 1s ease-in-out;
        }
        
        .coin.show-heads {
            transform: rotateY(0deg);
        }
        
        .coin.show-tails {
            transform: rotateY(180deg);
        }
        
        .choice-btn.selected {
            animation: choicePulse 0.5s ease-in-out 3;
        }
        
        .result-message.win {
            animation: resultWin 0.5s ease-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü™ô –ü–æ–¥–±—Ä–æ—Å—å –º–æ–Ω–µ—Ç–∫—É</h1>
            <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">{{ balance }}</span> –∫–æ–ø–µ–π–∫–∞</div>
        </div>

        <div class="games-navigation">
            <a href="/" class="nav-btn">üè† –ì–ª–∞–≤–Ω–∞—è</a>
            <a href="/slots" class="nav-btn">üéØ –°–ª–æ—Ç—ã</a>
            <a href="/blackjack" class="nav-btn">‚ô†Ô∏è –ë–ª—ç–∫–¥–∂–µ–∫</a>
            <a href="/dice" class="nav-btn">üé≤ –ö–æ—Å—Ç–∏</a>
        </div>

        <div class="coinflip-container">
            <div class="coin-stage">
                <div class="coin {% if result == 'heads' %}show-heads{% elif result == 'tails' %}show-tails{% endif %}" 
                     id="coin">
                    <div class="coin-side coin-heads">–û–†–Å–õ</div>
                    <div class="coin-side coin-tails">–†–ï–®–ö–ê</div>
                </div>
            </div>

            <form method="POST" class="betting-form" id="coinForm">
<div class="bet-selection">
                    <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞–≤–∫—É:</h3>
                    <div class="bet-options">
                        <label>
                            <input type="radio" name="bet" value="10" checked>
                            <span class="bet-chip">10 –∫–æ–ø–µ–π–∫–∞</span>
                        </label>
                        <label>
                            <input type="radio" name="bet" value="25">
                            <span class="bet-chip">25 –∫–æ–ø–µ–π–∫–∞</span>
                        </label>
                        <label>
                            <input type="radio" name="bet" value="50">
                            <span class="bet-chip">50 –∫–æ–ø–µ–π–∫–∞</span>
                        </label>
                        <label>
                            <input type="radio" name="bet" value="100">
                            <span class="bet-chip">100 –∫–æ–ø–µ–π–∫–∞</span>
                        </label>
                    </div>
                </div>

                <div class="choice-selection">
                    <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–æ—Ä–æ–Ω—É:</h3>
                    <div class="choice-options">
                        <label>
                            <input type="radio" name="choice" value="heads" checked id="choiceHeads">
                            <span class="choice-btn heads-btn" id="headsBtn">ü¶Ö –û—Ä—ë–ª</span>
                        </label>
                        <label>
                            <input type="radio" name="choice" value="tails" id="choiceTails">
                            <span class="choice-btn tails-btn" id="tailsBtn">üèõÔ∏è –†–µ—à–∫–∞</span>
                        </label>
                    </div>
                </div>

                <button type="submit" class="flip-btn" id="flipBtn">
                    üîÑ –ü–æ–¥–±—Ä–æ—Å–∏—Ç—å –º–æ–Ω–µ—Ç–∫—É
                </button>
            </form>

            {% if message %}
            <div class="result-message {% if '—É–≥–∞–¥–∞–ª–∏' in message %}win{% else %}lose{% endif %}" id="resultMessage">
                {{ message }}
            </div>
            {% endif %}

            <div class="stats">
                <div class="stat-item">
                    <span class="stat-label">–ü–æ–±–µ–¥:</span>
                    <span class="stat-value">{{ stats.wins }}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–í—Å–µ–≥–æ –∏–≥—Ä:</span>
                    <span class="stat-value">{{ stats.total }}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç:</span>
                    <span class="stat-value">x2</span>
                </div>
            </div>
        </div>

        <div class="game-rules">
            <h3>üìñ –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã:</h3>
            <ul>
                <li>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞–≤–∫—É –∏ —Å—Ç–æ—Ä–æ–Ω—É –º–æ–Ω–µ—Ç–∫–∏ (–û—Ä—ë–ª –∏–ª–∏ –†–µ—à–∫–∞)</li>
                <li>–ï—Å–ª–∏ —É–≥–∞–¥–∞–µ—Ç–µ - –ø–æ–ª—É—á–∞–µ—Ç–µ —É–¥–≤–æ–µ–Ω–Ω—É—é —Å—Ç–∞–≤–∫—É</li>
                <li>–ï—Å–ª–∏ –Ω–µ —É–≥–∞–¥–∞–µ—Ç–µ - —Ç–µ—Ä—è–µ—Ç–µ —Å—Ç–∞–≤–∫—É</li>
                <li>–®–∞–Ω—Å—ã 50/50 - –∏–¥–µ–∞–ª—å–Ω–æ —á–µ—Å—Ç–Ω–∞—è –∏–≥—Ä–∞!</li>
            </ul>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const coin = document.getElementById('coin');
            const flipBtn = document.getElementById('flipBtn');
            const headsBtn = document.getElementById('headsBtn');
            const tailsBtn = document.getElementById('tailsBtn');
            const choiceHeads = document.getElementById('choiceHeads');
            const choiceTails = document.getElementById('choiceTails');
            const resultMessage = document.getElementById('resultMessage');
            const betChips = document.querySelectorAll('.bet-chip');
            const coinForm = document.getElementById('coinForm');
// –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞ —Å—Ç–æ—Ä–æ–Ω—ã
            headsBtn.addEventListener('click', function() {
                choiceHeads.checked = true;
                headsBtn.classList.add('selected');
                tailsBtn.classList.remove('selected');
            });
            
            tailsBtn.addEventListener('click', function() {
                choiceTails.checked = true;
                tailsBtn.classList.add('selected');
                headsBtn.classList.remove('selected');
            });
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–∏
            if (choiceHeads.checked) {
                headsBtn.classList.add('selected');
            } else if (choiceTails.checked) {
                tailsBtn.classList.add('selected');
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞ —Ñ–∏—à–∫–∏
            betChips.forEach(chip => {
                chip.addEventListener('click', function() {
                    betChips.forEach(c => c.style.transform = 'scale(1)');
                    this.style.transform = 'scale(1.1)';
                });
            });
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É
            if (flipBtn) {
                flipBtn.addEventListener('click', function(e) {
                    if (!coinForm.checkValidity()) {
                        return;
                    }
                    
                    // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 100);
                    
                    // –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏ –º–æ–Ω–µ—Ç–∫–∏
                    coin.classList.add('flipping');
                    
                    // –ü–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                    setTimeout(() => {
                        coin.classList.remove('flipping');
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
                        if (resultMessage) {
                            resultMessage.style.display = 'block';
                            if (resultMessage.classList.contains('win')) {
                                resultMessage.classList.add('win');
                            }
                        }
                    }, 1000);
                });
            }
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏ –º–æ–Ω–µ—Ç–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ, –µ—Å–ª–∏ –µ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            {% if result %}
            setTimeout(() => {
                coin.classList.add('flipping');
                setTimeout(() => {
                    coin.classList.remove('flipping');
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É –º–æ–Ω–µ—Ç–∫–∏
                    coin.classList.remove('show-heads', 'show-tails');
                    coin.classList.add('show-{{ result }}');
                }, 1000);
            }, 500);
            {% endif %}
            
            // –ê–Ω–∏–º–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ
            if (resultMessage) {
                resultMessage.style.opacity = '0';
                setTimeout(() => {
                    resultMessage.style.transition = 'opacity 0.5s';
                    resultMessage.style.opacity = '1';
                }, 100);
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    resultMessage.style.opacity = '0';
                    setTimeout(() => {
                        resultMessage.style.display = 'none';
                    }, 500);
                }, 5000);
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –±–∞–ª–∞–Ω—Å–∞
            const balanceSpan = document.getElementById('balance');
            if (balanceSpan) {
                balanceSpan.addEventListener('DOMSubtreeModified', function() {
                    this.style.animation = 'none';
                    setTimeout(() => {
                        this.style.animation = 'choicePulse 0.5s ease';
                    }, 10);
                });
            }
        });
    </script>
</body>
</html>